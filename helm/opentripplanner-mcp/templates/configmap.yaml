apiVersion: v1
kind: ConfigMap
metadata:
  name: {{ .Values.common.app }}
  namespace: {{ .Release.Namespace }}
  labels:
    {{- include "labels" . |trim| nindent 4 }}
data:
    application.properties: |-
      spring.application.name=opentripplanner-mcp
      server.port=8080
      management.server.port=9090
      management.endpoints.web.exposure.include=info,health,prometheus,env,metrics,loggers
      # MCP Server Configuration
      spring.ai.mcp.server.protocol=STATELESS
      spring.ai.mcp.server.capabilities.prompt=false
      spring.ai.mcp.server.capabilities.completion=false
      spring.ai.mcp.server.capabilities.resource=false
      spring.ai.mcp.server.capabilities.tool=true

      # OpenAPI / Swagger UI Configuration
      springdoc.api-docs.path=/api/openapi
      springdoc.show-actuator=false

      # Metrics Configuration
      management.metrics.tags.application=opentripplanner-mcp

      org.entur.otp.url={{ .Values.configmap.urls.otp }}
      org.entur.geocoder.url={{.Values.configmap.urls.geocoder }}
